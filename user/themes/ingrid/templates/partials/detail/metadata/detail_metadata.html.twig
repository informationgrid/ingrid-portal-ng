{# theme_var #}
{% set isTimeInDescription = theme_var('detail_hit_time_in_description') %}
{% set sortAddressTyp = theme_var('detail_hit_address_order') %}
{% set sortContactByType = theme_var('detail_hit_contact_order') %}

{# var #}
{% set hit = hit %}
{% set uuid = hit.uuid %}
{% set title = hit.title %}
{% set class = hit.type %}
{% set className = hit.type_name %}
{% set accessConstraint = hit.accessConstraint %}
{% set partners = partners %}

{# Vorschau #}
{% set previews = hit.previews %}
{% set mapUrl = hit.mapUrl %}

{# Beschreibung #}
{% set summary = hit.summary %}

{# Zeitbezug #}
{% set timeRefs = {} %}
{% set timeRefs = addKeyValue(timeRefs, "atTime", hit.time_atTime) %}
{% set timeRefs = addKeyValue(timeRefs, "beginTime", hit.time_beginTime) %}
{% set timeRefs = addKeyValue(timeRefs, "endTime", hit.time_endTime) %}
{% set timeRefs = addKeyValue(timeRefs, "fromType", hit.time_fromType) %}
{% set timeRefs = addKeyValue(timeRefs, "status", hit.time_status) %}
{% set timeRefs = addKeyValue(timeRefs, "period", hit.time_period) %}
{% set timeRefs = addKeyValue(timeRefs, "interval", hit.time_interval) %}
{% set timeRefs = addKeyValue(timeRefs, "descr", hit.time_descr) %}
{% set timeRefs = addKeyValue(timeRefs, "creation", hit.time_creation) %}
{% set timeRefs = addKeyValue(timeRefs, "publication", hit.time_publication) %}
{% set timeRefs = addKeyValue(timeRefs, "revision", hit.time_revision) %}
{% set timeRefs = addKeyValue(timeRefs, "measureValue", hit.time_measureValue) %}
{% set timeRefs = addKeyValue(timeRefs, "measureUnit", hit.time_measureUnit) %}

{# Raumbezug #}
{% set mapRefs = {} %}
{% set mapRefs = addKeyValue(mapRefs, "bboxes", hit.map_bboxes) %}
{% set mapRefs = addKeyValue(mapRefs, "geographicElement", hit.map_geographicElement) %}
{% set mapRefs = addKeyValue(mapRefs, "regionKey", hit.map_regionKey) %}
{% set mapRefs = addKeyValue(mapRefs, "areaHeight", hit.map_areaHeight) %}
{% set mapRefs = addKeyValue(mapRefs, "loc_descr", hit.map_loc_descr) %}
{% set mapRefs = addKeyValue(mapRefs, "polygon_wkt", hit.map_polygon_wkt) %}
{% set mapRefs = addKeyValue(mapRefs, "referencesystem_id", hit.map_referencesystem_id) %}

{# Verweise und Downloads #}
{% set linkRefs = {} %}
{% set linkRefs = addKeyValue(linkRefs, "links", hit.links) %}
{% set linkRefs = addKeyValue(linkRefs, "parent_uuid", hit.parent_uuid) %}

{% if linkRefs.links %}
    {% set linkAccessRefs = linkRefs.links|filterLinks("access") %}
    {% set linkDownloadRefs = linkRefs.links|filterLinks("download") %}
    {% set linkObjectRefs = linkRefs.links|filterLinks("object") %}
    {% set linkOtherRefs = linkRefs.links|filterLinks("other") %}
    {% set linkSubordinatedRefs = linkRefs.links|filterLinks("subordinated") %}
    {% set linkSuperiorRefs = linkRefs.links|filterLinks("superior") %}
{% endif %}

{# Nutzung #}
{% set useRefs = {} %}
{% set useRefs = addKeyValue(useRefs, "useLimitations", hit.use_useLimitations) %}
{% set useRefs = addKeyValue(useRefs, "accessConstraints", hit.use_accessConstraints) %}
{% set useRefs = addKeyValue(useRefs, "useConstraints", hit.use_useConstraints) %}

{# Fachinformationen #}
{% set infoRefs = {} %}
{% if hit.info %}
    {% switch class %}
        {% case '1' %}
            {% set infoRefs = addKeyValue(infoRefs, "identifierCode", hit.info.identifierCode) %}
            {% set infoRefs = addKeyValue(infoRefs, "spatialRepresentations", hit.info.spatialRepresentations) %}
            {% set infoRefs = addKeyValue(infoRefs, "vectors", hit.info.vectors) %}
            {% set infoRefs = addKeyValue(infoRefs, "resolutions", hit.info.resolutions) %}
            {% set infoRefs = addKeyValue(infoRefs, "environmentDescription", hit.info.environmentDescription) %}
            {% set infoRefs = addKeyValue(infoRefs, "lineageStatement", hit.info.lineageStatement) %}
            {% set infoRefs = addKeyValue(infoRefs, "sourceDescription", hit.info.sourceDescription) %}
            {% set infoRefs = addKeyValue(infoRefs, "processStepDescription", hit.info.processStepDescription) %}
            {% set infoRefs = addKeyValue(infoRefs, "symbolCatalogues", hit.info.symbolCatalogues) %}
            {% set infoRefs = addKeyValue(infoRefs, "includedWithDataset", hit.info.includedWithDataset) %}
            {% set infoRefs = addKeyValue(infoRefs, "featureCatalogues", hit.info.featureCatalogues) %}
            {% set infoRefs = addKeyValue(infoRefs, "featureTypes", hit.info.featureTypes) %}
        {% case '2' %}
            {% set infoRefs = addKeyValue(infoRefs, "literatur_autor", hit.info.literatur_autor) %}
            {% set infoRefs = addKeyValue(infoRefs, "literatur_loc", hit.info.literatur_loc) %}
            {% set infoRefs = addKeyValue(infoRefs, "literatur_publisher", hit.info.literatur_publisher) %}
            {% set infoRefs = addKeyValue(infoRefs, "literatur_publish_loc", hit.info.literatur_publish_loc) %}
            {% set infoRefs = addKeyValue(infoRefs, "literatur_publishing", hit.info.literatur_publishing) %}
            {% set infoRefs = addKeyValue(infoRefs, "literatur_publish_in", hit.info.literatur_publish_in) %}
            {% set infoRefs = addKeyValue(infoRefs, "literatur_publish_year", hit.info.literatur_publish_year) %}
            {% set infoRefs = addKeyValue(infoRefs, "literatur_volume", hit.info.literatur_volume) %}
            {% set infoRefs = addKeyValue(infoRefs, "literatur_sides", hit.info.literatur_sides) %}
            {% set infoRefs = addKeyValue(infoRefs, "literatur_isbn", hit.info.literatur_isbn) %}
            {% set infoRefs = addKeyValue(infoRefs, "literatur_typ", hit.info.literatur_typ) %}
            {% set infoRefs = addKeyValue(infoRefs, "literatur_base", hit.info.literatur_base) %}
            {% set infoRefs = addKeyValue(infoRefs, "literatur_doc_info", hit.info.literatur_doc_info) %}
            {% set infoRefs = addKeyValue(infoRefs, "literatur_description", hit.info.literatur_description) %}
        {% case '3' %}
            {% set infoRefs = addKeyValue(infoRefs, "classifications", hit.info.classifications) %}
            {% set infoRefs = addKeyValue(infoRefs, "serviceType", hit.info.serviceType) %}
            {% set infoRefs = addKeyValue(infoRefs, "serviceTypeVersions", hit.info.serviceTypeVersions) %}
            {% set infoRefs = addKeyValue(infoRefs, "environmentDescription", hit.info.environmentDescription) %}
            {% set infoRefs = addKeyValue(infoRefs, "processStepDescription", hit.info.processStepDescription) %}
            {% set infoRefs = addKeyValue(infoRefs, "lineageStatement", hit.info.lineageStatement) %}
            {% set infoRefs = addKeyValue(infoRefs, "sourceDescription", hit.info.sourceDescription) %}
            {% set infoRefs = addKeyValue(infoRefs, "supplementalInformation", hit.info.supplementalInformation) %}
            {% set infoRefs = addKeyValue(infoRefs, "supplementalInformationAbstract", hit.info.supplementalInformationAbstract) %}
            {% set infoRefs = addKeyValue(infoRefs, "operations", hit.info.operations) %}
            {% set infoRefs = addKeyValue(infoRefs, "operationConnectPoint", hit.info.operationConnectPoint) %}
        {% case '4' %}
            {% set infoRefs = addKeyValue(infoRefs, "project_leader", hit.info.project_leader) %}
            {% set infoRefs = addKeyValue(infoRefs, "project_member", hit.info.project_member) %}
            {% set infoRefs = addKeyValue(infoRefs, "project_description", hit.info.project_description) %}
        {% case '5' %}
            {% set infoRefs = addKeyValue(infoRefs, "includedWithDataset", hit.info.includedWithDataset) %}
            {% set infoRefs = addKeyValue(infoRefs, "featureCatalogues", hit.info.featureCatalogues) %}
            {% set infoRefs = addKeyValue(infoRefs, "data_para", hit.info.data_para) %}
            {% set infoRefs = addKeyValue(infoRefs, "data_base", hit.info.data_base) %}
            {% set infoRefs = addKeyValue(infoRefs, "data_description", hit.info.data_description) %}
        {% case '6' %}
            {% set infoRefs = addKeyValue(infoRefs, "environmentDescription", hit.info.environmentDescription) %}
            {% set infoRefs = addKeyValue(infoRefs, "processStepDescription", hit.info.processStepDescription) %}
            {% set infoRefs = addKeyValue(infoRefs, "sourceDescription", hit.info.sourceDescription) %}
            {% set infoRefs = addKeyValue(infoRefs, "supplementalInformation", hit.info.supplementalInformation) %}
    {% endswitch %}
{% endif %}

{% set infoRefs_additional = {} %}
{% set infoRefs_additional = addKeyValue(infoRefs_additional, "publish_id", hit.info_additional_publish_id) %}
{% set infoRefs_additional = addKeyValue(infoRefs_additional, "usage", hit.info_additional_usage) %}
{% set infoRefs_additional = addKeyValue(infoRefs_additional, "purpose", hit.info_additional_purpose) %}
{% set infoRefs_additional = addKeyValue(infoRefs_additional, "legal_basis", hit.info_additional_legal_basis) %}
{% set infoRefs_additional = addKeyValue(infoRefs_additional, "export_criteria", hit.info_additional_export_criteria) %}
{% set infoRefs_additional = addKeyValue(infoRefs_additional, "language_code", hit.info_additional_language_code) %}
{% set infoRefs_additional = addKeyValue(infoRefs_additional, "conformity", hit.info_additional_conformity) %}
{% set infoRefs_additional = addKeyValue(infoRefs_additional, "dataformat", hit.info_additional_dataformat) %}
{% set infoRefs_additional = addKeyValue(infoRefs_additional, "geodatalink", hit.info_additional_geodatalink) %}
{% set infoRefs_additional = addKeyValue(infoRefs_additional, "media", hit.info_additional_media) %}
{% set infoRefs_additional = addKeyValue(infoRefs_additional, "order_instructions", hit.info_additional_order_instructions) %}

{% set infoRefs_keyword = {} %}
{% set infoRefs_keyword = addKeyValue(infoRefs_keyword, "inspire_themes", hit.info_keywords_inspire_themes) %}
{% set infoRefs_keyword = addKeyValue(infoRefs_keyword, "priority_dataset", hit.info_keywords_priority_dataset) %}
{% set infoRefs_keyword = addKeyValue(infoRefs_keyword, "spatial_scope", hit.info_keywords_spatial_scope) %}
{% set infoRefs_keyword = addKeyValue(infoRefs_keyword, "gemet_concepts", hit.info_keywords_gemet_concepts) %}
{% set infoRefs_keyword = addKeyValue(infoRefs_keyword, "adv_group", hit.info_keywords_adv_group) %}
{% set infoRefs_keyword = addKeyValue(infoRefs_keyword, "invekos", hit.info_keywords_invekos) %}
{% set infoRefs_keyword = addKeyValue(infoRefs_keyword, "topic_category", hit.info_keywords_topic_category) %}
{% set infoRefs_keyword = addKeyValue(infoRefs_keyword, "search_terms", hit.info_keywords_search_terms) %}

{# Kontakt #}
{% set contactRefs = hit.contacts %}

{# Metadaten Informationen #}
{% set metaInfoRefs = {} %}
{% set metaInfoRefs = addKeyValue(metaInfoRefs, "uuid", hit.meta_info_uuid) %}
{% set metaInfoRefs = addKeyValue(metaInfoRefs, "mod_time", hit.meta_info_mod_time) %}
{% set metaInfoRefs = addKeyValue(metaInfoRefs, "lang", hit.meta_info_lang) %}
{% set metaInfoRefs = addKeyValue(metaInfoRefs, "hierarchy_level", hit.meta_info_hierarchy_level) %}
{% set metaInfoRefs = addKeyValue(metaInfoRefs, "contact_meta", hit.meta_info_contact_meta) %}
{% set metaInfoRefs = addKeyValue(metaInfoRefs, "plug_data_source_name", hit.meta_info_plug_data_source_name) %}
{% set metaInfoRefs = addKeyValue(metaInfoRefs, "plug_providers", hit.meta_info_plug_providers) %}

{# Datenqualität #}
{% set dataQualityRefs = {} %}
{% set dataQualityRefs = addKeyValue(dataQualityRefs, "completenessOmission", hit.data_quality_completenessOmission) %}
{% set dataQualityRefs = addKeyValue(dataQualityRefs, "accuracyVertical", hit.data_quality_accuracyVertical) %}
{% set dataQualityRefs = addKeyValue(dataQualityRefs, "accuracyGeographic", hit.data_quality_accuracyGeographic) %}
{% set dataQualityRefs = addKeyValue(dataQualityRefs, "completenessCommission", hit.data_quality_completenessCommission) %}
{% set dataQualityRefs = addKeyValue(dataQualityRefs, "conceptualConsistency", hit.data_quality_conceptualConsistency) %}
{% set dataQualityRefs = addKeyValue(dataQualityRefs, "domainConsistency", hit.data_quality_domainConsistency) %}
{% set dataQualityRefs = addKeyValue(dataQualityRefs, "formatConsistency", hit.data_quality_formatConsistency) %}
{% set dataQualityRefs = addKeyValue(dataQualityRefs, "topologicalConsistency", hit.data_quality_topologicalConsistency) %}
{% set dataQualityRefs = addKeyValue(dataQualityRefs, "temporalConsistency", hit.data_quality_temporalConsistency) %}
{% set dataQualityRefs = addKeyValue(dataQualityRefs, "thematicClassificationCorrectness", hit.data_quality_thematicClassificationCorrectness) %}
{% set dataQualityRefs = addKeyValue(dataQualityRefs, "nonQuantitativeAttributeAccuracy", hit.data_quality_nonQuantitativeAttributeAccuracy) %}
{% set dataQualityRefs = addKeyValue(dataQualityRefs, "quantitativeAttributeAccuracy", hit.data_quality_quantitativeAttributeAccuracy) %}
{% set dataQualityRefs = addKeyValue(dataQualityRefs, "relativeInternalPositionalAccuracy", hit.data_quality_relativeInternalPositionalAccuracy) %}

{# booleans #}
{% set hasOverview = (links|length > 0 or useConstraints|length > 0 or previews|length > 0 or contactRefs|length > 0) %}
{% set hasDescription = (alternateTitle or summary) %}
{% set hasTime = (timeRefs|length > 0) %}
{% set hasTimeData = (timeRefs.beginTime or timeRefs.endTime or timeRefs.atTime or timeRefs.status or  timeRefs.period or timeRefs.interval or (timeRefs.measureValue and timeRefs.measureUnit)) %}
{% set hasTimeResource = (timeRefs.creation or timeRefs.publication or timeRefs.revision) %}
{% set hasArea = (mapRefs|length > 0) %}
{% set hasLinks = (linkRefs|length > 0) %}
{% set hasUse = (useRefs|length > 0) %}
{% set hasAdditional = "detail_additional" %}
{% set hasContact = (contactRefs|length > 0) %}
{% set hasInfo = (infoRefs_additional|length > 0 or infoRefs_keyword|length > 0 ) %}
{% set hasDataquality = (dataQualityRefs|length > 0) %}
{% set hasMetadataInfo = (metaInfoRefs|length > 0) %}
{% set hasBibliographicalInfo = false %}

{% include 'partials/detail/metadata/detail_metadata_view.html.twig' %}