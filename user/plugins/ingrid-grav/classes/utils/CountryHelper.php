<?php

namespace Grav\Plugin;
use Grav\Common\Plugin;

class CountryHelper
{

    private static array $countryShortcut3ToCode = [
        "AFG" => 4,
        "EGY" => 818,
        "ALA" => 248,
        "ALB" => 8,
        "DZA" => 12,
        "VIR" => 850,
        "ASM" => 16,
        "AND" => 20,
        "AGO" => 24,
        "AIA" => 660,
        "ATA" => 10,
        "ATG" => 28,
        "GNQ" => 226,
        "ARG" => 32,
        "ARM" => 51,
        "ABW" => 533,
        "AZE" => 31,
        "ETH" => 231,
        "AUS" => 36,
        "BHS" => 44,
        "BHR" => 48,
        "BGD" => 50,
        "BRB" => 52,
        "BLR" => 112,
        "BEL" => 56,
        "BLZ" => 84,
        "BEN" => 204,
        "BMU" => 60,
        "BTN" => 64,
        "BOL" => 68,
        "BIH" => 70,
        "BWA" => 72,
        "BVT" => 74,
        "BRA" => 76,
        "VGB" => 92,
        "IOT" => 86,
        "BRN" => 96,
        "BGR" => 100,
        "BFA" => 854,
        "BDI" => 108,
        "CHL" => 152,
        "CHN" => 156,
        "COK" => 184,
        "CRI" => 188,
        "CIV" => 384,
        "DNK" => 208,
        "DEU" => 276,
        "DMA" => 212,
        "DOM" => 214,
        "DJI" => 262,
        "ECU" => 218,
        "SLV" => 222,
        "ERI" => 232,
        "EST" => 233,
        "FLK" => 238,
        "FRO" => 234,
        "FJI" => 242,
        "FIN" => 246,
        "FRA" => 250,
        "ATF" => 260,
        "GUF" => 254,
        "PYF" => 258,
        "GAB" => 266,
        "GMB" => 270,
        "GEO" => 268,
        "GHA" => 288,
        "GIB" => 292,
        "GRD" => 308,
        "GRC" => 300,
        "GRL" => 304,
        "GLP" => 312,
        "GUM" => 316,
        "GTM" => 320,
        "GGY" => 831,
        "GIN" => 324,
        "GNB" => 624,
        "GUY" => 328,
        "HTI" => 332,
        "HMD" => 334,
        "HND" => 340,
        "HKG" => 344,
        "IND" => 356,
        "IDN" => 360,
        "IMN" => 833,
        "IRQ" => 368,
        "IRN" => 364,
        "IRL" => 372,
        "ISL" => 352,
        "ISR" => 376,
        "ITA" => 380,
        "JAM" => 388,
        "JPN" => 392,
        "YEM" => 887,
        "JEY" => 832,
        "JOR" => 400,
        "CYM" => 136,
        "KHM" => 116,
        "CMR" => 120,
        "CAN" => 124,
        "CPV" => 132,
        "KAZ" => 398,
        "QAT" => 634,
        "KEN" => 404,
        "KGZ" => 417,
        "KIR" => 296,
        "CCK" => 166,
        "COL" => 170,
        "COM" => 174,
        "COD" => 180,
        "PRK" => 408,
        "KOR" => 410,
        "HRV" => 191,
        "CUB" => 192,
        "KWT" => 414,
        "LAO" => 418,
        "LSO" => 426,
        "LVA" => 428,
        "LBN" => 422,
        "LBR" => 430,
        "LBY" => 434,
        "LIE" => 438,
        "LTU" => 440,
        "LUX" => 442,
        "MAC" => 446,
        "MDG" => 450,
        "MWI" => 454,
        "MYS" => 458,
        "MDV" => 462,
        "MLI" => 466,
        "MLT" => 470,
        "MAR" => 504,
        "MHL" => 584,
        "MTQ" => 474,
        "MRT" => 478,
        "MUS" => 480,
        "MYT" => 175,
        "MKD" => 807,
        "MEX" => 484,
        "FSM" => 583,
        "MDA" => 498,
        "MCO" => 492,
        "MNG" => 496,
        "MNE" => 499,
        "MSR" => 500,
        "MOZ" => 508,
        "MMR" => 104,
        "NAM" => 516,
        "NRU" => 520,
        "NPL" => 524,
        "NCL" => 540,
        "NZL" => 554,
        "NIC" => 558,
        "NLD" => 528,
        "ANT" => 530,
        "NER" => 562,
        "NGA" => 566,
        "NIU" => 570,
        "MNP" => 580,
        "NFK" => 574,
        "NOR" => 578,
        "OMN" => 512,
        "AUT" => 40,
        "TLS" => 626,
        "PAK" => 586,
        "PSE" => 275,
        "PLW" => 585,
        "PAN" => 591,
        "PNG" => 598,
        "PRY" => 600,
        "PER" => 604,
        "PHL" => 608,
        "PCN" => 612,
        "POL" => 616,
        "PRT" => 620,
        "PRI" => 630,
        "TWN" => 158,
        "COG" => 178,
        "REU" => 638,
        "RWA" => 646,
        "ROU" => 642,
        "RUS" => 643,
        "BLM" => 652,
        "MAF" => 663,
        "SLB" => 90,
        "ZMB" => 894,
        "WSM" => 882,
        "SMR" => 674,
        "STP" => 678,
        "SAU" => 682,
        "SWE" => 752,
        "CHE" => 756,
        "SEN" => 686,
        "SRB" => 688,
        "SYC" => 690,
        "SLE" => 694,
        "ZWE" => 716,
        "SGP" => 702,
        "SVK" => 703,
        "SVN" => 705,
        "SOM" => 706,
        "ESP" => 724,
        "LKA" => 144,
        "SHN" => 654,
        "KNA" => 659,
        "LCA" => 662,
        "SPM" => 666,
        "VCT" => 670,
        "ZAF" => 710,
        "SDN" => 736,
        "SGS" => 239,
        "SUR" => 740,
        "SJM" => 744,
        "SWZ" => 748,
        "SYR" => 760,
        "TJK" => 762,
        "TZA" => 834,
        "THA" => 764,
        "TGO" => 768,
        "TKL" => 772,
        "TON" => 776,
        "TTO" => 780,
        "TCD" => 148,
        "CZE" => 203,
        "TUN" => 788,
        "TUR" => 792,
        "TKM" => 795,
        "TCA" => 796,
        "TUV" => 798,
        "UGA" => 800,
        "UKR" => 804,
        "HUN" => 348,
        "UMI" => 581,
        "URY" => 858,
        "UZB" => 860,
        "VUT" => 548,
        "VAT" => 336,
        "VEN" => 862,
        "ARE" => 784,
        "USA" => 840,
        "GBR" => 826,
        "VNM" => 704,
        "WLF" => 876,
        "CXR" => 162,
        "ESH" => 732,
        "CAF" => 140,
        "CYP" => 196,
    ];

    private static array $countryCodelist_de = [
        4 => "Afghanistan",
        818 => "\u00c4gypten",
        248 => "\u00c5land",
        8 => "Albanien",
        12 => "Algerien",
        850 => "Amerikanische Jungferninseln",
        16 => "Amerikanisch-Samoa",
        20 => "Andorra",
        24 => "Angola",
        660 => "Anguilla",
        10 => "Antarktis",
        28 => "Antigua und Barbuda",
        226 => "\u00c4quatorialguinea",
        32 => "Argentinien",
        51 => "Armenien",
        533 => "Aruba",
        31 => "Aserbaidschan",
        231 => "\u00c4thiopien",
        36 => "Australien",
        44 => "Bahamas",
        48 => "Bahrain",
        50 => "Bangladesch",
        52 => "Barbados",
        112 => "Belarus (Wei\u00dfrussland)",
        56 => "Belgien",
        84 => "Belize",
        204 => "Benin",
        60 => "Bermuda",
        64 => "Bhutan",
        68 => "Bolivien",
        70 => "Bosnien und Herzegowina",
        72 => "Botswana",
        74 => "Bouvetinsel",
        76 => "Brasilien",
        92 => "Britische Jungferninseln",
        86 => "Britisches Territorium im Indischen Ozean",
        96 => "Brunei Darussalam",
        100 => "Bulgarien",
        854 => "Burkina Faso",
        108 => "Burundi",
        152 => "Chile",
        156 => "China, Volksrepublik",
        184 => "Cookinseln",
        188 => "Costa Rica",
        384 => "C\u00f4te d'Ivoire (Elfenbeink\u00fcste)",
        208 => "D\u00e4nemark",
        276 => "Deutschland",
        212 => "Dominica",
        214 => "Dominikanische Republik",
        262 => "Dschibuti",
        218 => "Ecuador",
        222 => "El Salvador",
        232 => "Eritrea",
        233 => "Estland",
        238 => "Falklandinseln",
        234 => "F\u00e4r\u00f6er",
        242 => "Fidschi",
        246 => "Finnland",
        250 => "Frankreich",
        260 => "Franz\u00f6sische S\u00fcd- und Antarktisgebiete",
        254 => "Franz\u00f6sisch-Guayana",
        258 => "Franz\u00f6sisch-Polynesien",
        266 => "Gabun",
        270 => "Gambia",
        268 => "Georgien",
        288 => "Ghana",
        292 => "Gibraltar",
        308 => "Grenada",
        300 => "Griechenland",
        304 => "Gr\u00f6nland",
        312 => "Guadeloupe",
        316 => "Guam",
        320 => "Guatemala",
        831 => "Guernsey (Kanalinsel)",
        324 => "Guinea",
        624 => "Guinea-Bissau",
        328 => "Guyana",
        332 => "Haiti",
        334 => "Heard- und McDonald-Inseln",
        340 => "Honduras",
        344 => "Hongkong",
        356 => "Indien",
        360 => "Indonesien",
        833 => "Insel Man",
        368 => "Irak",
        364 => "Iran, Islamische Republik",
        372 => "Irland",
        352 => "Island",
        376 => "Israel",
        380 => "Italien",
        388 => "Jamaika",
        392 => "Japan",
        887 => "Jemen",
        832 => "Jersey (Kanalinsel)",
        400 => "Jordanien",
        136 => "Kaimaninseln",
        116 => "Kambodscha",
        120 => "Kamerun",
        124 => "Kanada",
        132 => "Kap Verde",
        398 => "Kasachstan",
        634 => "Katar",
        404 => "Kenia",
        417 => "Kirgisistan",
        296 => "Kiribati",
        166 => "Kokosinseln",
        170 => "Kolumbien",
        174 => "Komoren",
        180 => "Kongo, Demokratische Republik (ehem. Zaire)",
        408 => "Korea, Demokratische Volksrepublik (Nordkorea)",
        410 => "Korea, Republik (S\u00fcdkorea)",
        191 => "Kroatien",
        192 => "Kuba",
        414 => "Kuwait",
        418 => "Laos, Demokratische Volksrepublik",
        426 => "Lesotho",
        428 => "Lettland",
        422 => "Libanon",
        430 => "Liberia",
        434 => "Libysch-Arabische Dschamahirija (Libyen)",
        438 => "Liechtenstein",
        440 => "Litauen",
        442 => "Luxemburg",
        446 => "Macao",
        450 => "Madagaskar",
        454 => "Malawi",
        458 => "Malaysia",
        462 => "Malediven",
        466 => "Mali",
        470 => "Malta",
        504 => "Marokko",
        584 => "Marshallinseln",
        474 => "Martinique",
        478 => "Mauretanien",
        480 => "Mauritius",
        175 => "Mayotte",
        807 => "Mazedonien, ehem. jugoslawische Republik",
        484 => "Mexiko",
        583 => "Mikronesien",
        498 => "Moldawien (Republik Moldau)",
        492 => "Monaco",
        496 => "Mongolei",
        499 => "Montenegro",
        500 => "Montserrat",
        508 => "Mosambik",
        104 => "Myanmar (Burma)",
        516 => "Namibia",
        520 => "Nauru",
        524 => "Nepal",
        540 => "Neukaledonien",
        554 => "Neuseeland",
        558 => "Nicaragua",
        528 => "Niederlande",
        530 => "Niederl\u00e4ndische Antillen",
        562 => "Niger",
        566 => "Nigeria",
        570 => "Niue",
        580 => "N\u00f6rdliche Marianen",
        574 => "Norfolkinsel",
        578 => "Norwegen",
        512 => "Oman",
        40 =>	 "\u00d6sterreich",
        626 => "Osttimor (Timor-Leste)",
        586 => "Pakistan",
        275 => "Pal\u00e4stinensische Autonomiegebiete",
        585 => "Palau",
        591 => "Panama",
        598 => "Papua-Neuguinea",
        600 => "Paraguay",
        604 => "Peru",
        608 => "Philippinen",
        612 => "Pitcairninseln",
        616 => "Polen",
        620 => "Portugal",
        630 => "Puerto Rico",
        158 => "Republik China (Taiwan)",
        178 => "Republik Kongo",
        638 => "R\u00e9union",
        646 => "Ruanda",
        642 => "Rum\u00e4nien",
        643 => "Russische F\u00f6deration",
        652 => "Saint-Barth\u00e9lemy",
        663 => "Saint-Martin (franz. Teil)",
        90 =>  "Salomonen",
        894 => "Sambia",
        882 => "Samoa",
        674 => "San Marino",
        678 => "S\u00e3o Tom\u00e9 und Pr\u00edncipe",
        682 => "Saudi-Arabien",
        752 => "Schweden",
        756 => "Schweiz (Confoederatio Helvetica)",
        686 => "Senegal",
        688 => "Serbien",
        690 => "Seychellen",
        694 => "Sierra Leone",
        716 => "Simbabwe",
        702 => "Singapur",
        703 => "Slowakei",
        705 => "Slowenien",
        706 => "Somalia",
        724 => "Spanien",
        144 => "Sri Lanka",
        654 => "St. Helena",
        659 => "St. Kitts und Nevis",
        662 => "St. Lucia",
        666 => "St. Pierre und MiquelonSaint-Pierre und Miquelon",
        670 => "St. Vincent und die Grenadinen",
        710 => "S\u00fcdafrika",
        736 => "Sudan",
        239 => "S\u00fcdgeorgien und die S\u00fcdlichen Sandwichinseln",
        740 => "Suriname",
        744 => "Svalbard und Jan Mayen",
        748 => "Swasiland",
        760 => "Syrien, Arabische Republik",
        762 => "Tadschikistan",
        834 => "Tansania, Vereinigte Republik",
        764 => "Thailand",
        768 => "Togo",
        772 => "Tokelau",
        776 => "Tonga",
        780 => "Trinidad und Tobago",
        148 => "Tschad",
        203 => "Tschechische Republik",
        788 => "Tunesien",
        792 => "T\u00fcrkei",
        795 => "Turkmenistan",
        796 => "Turks- und Caicosinseln",
        798 => "Tuvalu",
        800 => "Uganda",
        804 => "Ukraine",
        348 => "Ungarn",
        581 => "United States Minor Outlying Islands",
        858 => "Uruguay",
        860 => "Usbekistan",
        548 => "Vanuatu",
        336 => "Vatikanstadt",
        862 => "Venezuela",
        784 => "Vereinigte Arabische Emirate",
        840 => "Vereinigte Staaten von Amerika",
        826 => "Vereinigtes K\u00f6nigreich Gro\u00dfbritannien und Nordirland",
        704 => "Vietnam",
        876 => "Wallis und Futuna",
        162 => "Weihnachtsinsel",
        732 => "Westsahara",
        140 => "Zentralafrikanische Republik",
        196 => "Zypern",
    ];

    private static array $countryCodelist_en = [
        4 => "Afghanistan",
        818 => "Egypt",
        248 => "\u00c5land Islands",
        8 => "Albania",
        12 => "Algeria",
        850 => "Virgin Islands, U.S.",
        16 => "American Samoa",
        20 => "Andorra",
        24 => "Angola",
        660 => "Anguilla",
        10 => "Antarctica",
        28 => "Antigua and Barbuda",
        226 => "Equatorial Guinea",
        32 => "Argentina",
        51 => "Armenia",
        533 => "Aruba",
        31 => "Azerbaijan",
        231 => "Ethiopia",
        36 => "Australia",
        44 => "Bahamas",
        48 => "Bahrain",
        50 => "Bangladesh",
        52 => "Barbados",
        112 => "Belarus",
        56 => "Belgium",
        84 => "Belize",
        204 => "Benin",
        60 => "Bermuda",
        64 => "Bhutan",
        68 => "Bolivia, Plurinational State of",
        70 => "Bosnia and Herzegovina",
        72 => "Botswana",
        74 => "Bouvet Island",
        76 => "Brazil",
        92 => "Virgin Islands, British",
        86 => "British Indian Ocean Territory",
        96 => "Brunei Darussalam",
        100 => "Bulgaria",
        854 => "Burkina Faso",
        108 => "Burundi",
        152 => "Chile",
        156 => "China",
        184 => "Cook Islands",
        188 => "Costa Rica",
        384 => "C\u00f4te d'Ivoire",
        208 => "Denmark",
        276 => "Germany",
        212 => "Dominica",
        214 => "Dominican Republic",
        262 => "Djibouti",
        218 => "Ecuador",
        222 => "El Salvador",
        232 => "Eritrea",
        233 => "Estonia",
        238 => "Falkland Islands (Malvinas)",
        234 => "Faroe Islands",
        242 => "Fiji",
        246 => "Finland",
        250 => "France",
        260 => "French Southern Territories",
        254 => "French Guiana",
        258 => "French Polynesia",
        266 => "Gabon",
        270 => "Gambia",
        268 => "Georgia",
        288 => "Ghana",
        292 => "Gibraltar",
        308 => "Grenada",
        300 => "Greece",
        304 => "Greenland",
        312 => "Guadeloupe",
        316 => "Guam",
        320 => "Guatemala",
        831 => "Guernsey",
        324 => "Guinea",
        624 => "Guinea-Bissau",
        328 => "Guyana",
        332 => "Haiti",
        334 => "Heard Island and McDonald Islands",
        340 => "Honduras",
        344 => "Hong Kong",
        356 => "India",
        360 => "Indonesia",
        833 => "Isle of Man",
        368 => "Iraq",
        364 => "Iran, Islamic Republic of",
        372 => "Ireland",
        352 => "Iceland",
        376 => "Israel",
        380 => "Italy",
        388 => "Jamaica",
        392 => "Japan",
        887 => "Yemen",
        832 => "Jersey",
        400 => "Jordan",
        136 => "Cayman Islands",
        116 => "Cambodia",
        120 => "Cameroon",
        124 => "Canada",
        132 => "Cape Verde",
        398 => "Kazakhstan",
        634 => "Qatar",
        404 => "Kenya",
        417 => "Kyrgyzstan",
        296 => "Kiribati",
        166 => "Cocos (Keeling) Islands",
        170 => "Colombia",
        174 => "Comoros",
        180 => "Congo, the Democratic Republic of the",
        408 => "Korea, Democratic People's Republic of",
        410 => "Korea, Republic of",
        191 => "Croatia",
        192 => "Cuba",
        414 => "Kuwait",
        418 => "Lao People's Democratic Republic",
        426 => "Lesotho",
        428 => "Latvia",
        422 => "Lebanon",
        430 => "Liberia",
        434 => "Libyan Arab Jamahiriya",
        438 => "Liechtenstein",
        440 => "Lithuania",
        442 => "Luxembourg",
        446 => "Macao",
        450 => "Madagascar",
        454 => "Malawi",
        458 => "Malaysia",
        462 => "Maldives",
        466 => "Mali",
        470 => "Malta",
        504 => "Morocco",
        584 => "Marshall Islands",
        474 => "Martinique",
        478 => "Mauritania",
        480 => "Mauritius",
        175 => "Mayotte",
        807 => "Macedonia, the former Yugoslav Republic of",
        484 => "Mexico",
        583 => "Micronesia, Federated States of",
        498 => "Moldova, Republic of",
        492 => "Monaco",
        496 => "Mongolia",
        499 => "Montenegro",
        500 => "Montserrat",
        508 => "Mozambique",
        104 => "Myanmar",
        516 => "Namibia",
        520 => "Nauru",
        524 => "Nepal",
        540 => "New Caledonia",
        554 => "New Zealand",
        558 => "Nicaragua",
        528 => "Netherlands",
        530 => "Netherlands Antilles",
        562 => "Niger",
        566 => "Nigeria",
        570 => "Niue",
        580 => "Northern Mariana Islands",
        574 => "Norfolk Island",
        578 => "Norway",
        512 => "Oman",
        40 => "Austria",
        626 => "Timor-Leste",
        586 => "Pakistan",
        275 => "Palestinian Territory, Occupied",
        585 => "Palau",
        591 => "Panama",
        598 => "Papua New Guinea",
        600 => "Paraguay",
        604 => "Peru",
        608 => "Philippines",
        612 => "Pitcairn",
        616 => "Poland",
        620 => "Portugal",
        630 => "Puerto Rico",
        158 => "Taiwan, Province of China",
        178 => "Congo",
        638 => "R\u00e9union",
        646 => "Rwanda",
        642 => "Romania",
        643 => "Russian Federation",
        652 => "Saint Barth\u00e9lemy",
        663 => "Saint Martin (French part)",
        90 => "Solomon Islands",
        894 => "Zambia",
        882 => "Samoa",
        674 => "San Marino",
        678 => "Sao Tome and Principe",
        682 => "Saudi Arabia",
        752 => "Sweden",
        756 => "Switzerland",
        686 => "Senegal",
        688 => "Serbia",
        690 => "Seychelles",
        694 => "Sierra Leone",
        716 => "Zimbabwe",
        702 => "Singapore",
        703 => "Slovakia",
        705 => "Slovenia",
        706 => "Somalia",
        724 => "Spain",
        144 => "Sri Lanka",
        654 => "Saint Helena",
        659 => "Saint Kitts and Nevis",
        662 => "Saint Lucia",
        666 => "Saint Pierre and Miquelon",
        670 => "Saint Vincent and the Grenadines",
        710 => "South Africa",
        736 => "Sudan",
        239 => "South Georgia and the South Sandwich Islands",
        740 => "Suriname",
        744 => "Svalbard and Jan Mayen",
        748 => "Swaziland",
        760 => "Syrian Arab Republic",
        762 => "Tajikistan",
        834 => "Tanzania, United Republic of",
        764 => "Thailand",
        768 => "Togo",
        772 => "Tokelau",
        776 => "Tonga",
        780 => "Trinidad and Tobago",
        148 => "Chad",
        203 => "Czech Republic",
        788 => "Tunisia",
        792 => "Turkey",
        795 => "Turkmenistan",
        796 => "Turks and Caicos Islands",
        798 => "Tuvalu",
        800 => "Uganda",
        804 => "Ukraine",
        348 => "Hungary",
        581 => "United States Minor Outlying Islands",
        858 => "Uruguay",
        860 => "Uzbekistan",
        548 => "Vanuatu",
        336 => "Holy See (Vatican City State)",
        862 => "Venezuela, Bolivarian Republic of",
        784 => "United Arab Emirates",
        840 => "United States",
        826 => "United Kingdom",
        704 => "Viet Nam",
        876 => "Wallis and Futuna",
        162 => "Christmas Island",
        732 => "Western Sahara",
        140 => "Central African Republic",
        196 => "Cyprus",
    ];

    public static function getNameFromCode(string $value, string $lang): string
    {
        $name = $value;
        if (array_key_exists($value, self::$countryShortcut3ToCode)) {
            $igeCode = self::$countryShortcut3ToCode[$value];
            if ($igeCode) {
                if ($lang == 'en') {
                    $name = self::$countryCodelist_en[$igeCode];
                } else {
                    $name = self::$countryCodelist_de[$igeCode];
                }
            }
        }
        return $name;
    }

    public static function getNamesFromCode(array $values, string $lang): array
    {
        $array = [];
        foreach ($values as $value) {
            $array[] = self::getNameFromCode($value, $lang);
        }
        return $array;
    }
}